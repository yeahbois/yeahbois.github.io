<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Alex – 3D Portfolio</title>
  <!-- Fixed CDN URLs (no trailing spaces!) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/three@0.160.1/build/three.min.js"></script>
  <script src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow-x: hidden;
      background: #000;
      color: white;
      font-family: 'Inter', sans-serif;
    }

    /* 3D Canvas Container */
    #canvas-container {
      position: fixed;
      top: 0;
      right: 0;
      width: 45vw;
      height: 100vh;
      z-index: -1;
      pointer-events: none;
    }

    /* Main layout */
    .layout {
      display: flex;
      min-height: 100vh;
      padding: 4rem 2rem 2rem 5%;
      box-sizing: border-box;
      max-width: 100%;
    }

    .text-panel {
      flex: 1;
      max-width: 600px;
      z-index: 10;
    }

    .text-panel h1 {
      font-size: 2.8rem;
      margin-bottom: 1.25rem;
      line-height: 1.2;
    }

    .text-panel p {
      margin-bottom: 1.5rem;
      color: #cbd5e1;
    }

    /* Mobile */
    @media (max-width: 1023px) {
      #canvas-container {
        position: relative;
        width: 100vw;
        height: 45vh;
        top: auto;
        right: auto;
        margin-top: 3rem;
      }

      .layout {
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 3rem 1.5rem 1rem;
      }

      .text-panel {
        margin-bottom: 2rem;
      }

      .text-panel h1 {
        font-size: 2.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="layout">
    <div class="text-panel">
      <h1>
        Hi, I'm <span class="text-cyan-400">Alex</span><br />
        3D Web Developer
      </h1>
      <p>
        I build immersive experiences that blend AI, real-time data, and interactive 3D.
        Scroll to see the morph effect!
      </p>
      <button class="px-6 py-3 bg-cyan-500 text-black font-bold rounded-full hover:bg-cyan-400 transition">
        View Projects
      </button>
    </div>
  </div>

  <!-- Spacer content for scroll -->
  <section class="py-20 px-6 max-w-2xl mx-auto text-gray-300">
    <h2 class="text-2xl font-bold mb-4 text-cyan-400">My Work</h2>
    <p>
      From real-time transit optimization in Jabodetabek to AI-powered dashboards — I turn complex urban challenges into elegant interfaces.
    </p>
  </section>

  <section class="py-20 px-6 max-w-2xl mx-auto text-gray-300">
    <h2 class="text-2xl font-bold mb-4 text-cyan-400">Let’s Connect</h2>
    <p>
      Open to collaborations on sustainable AI, urban mobility, or immersive web apps.
    </p>
    <a href="mailto:you@example.com" class="inline-block mt-4 px-5 py-2 bg-cyan-500 text-black font-semibold rounded">
      Get in Touch
    </a>
  </section>

  <!-- 3D Scene -->
  <div id="canvas-container"></div>

  <script>
    // Initialize Three.js
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);
    scene.fog = new THREE.Fog(0x000000, 6, 12);

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    document.getElementById('canvas-container').appendChild(renderer.domElement);

    // Responsive camera
    const updateCamera = () => {
      const isMobile = window.innerWidth < 1024;
      const width = isMobile ? window.innerWidth : window.innerWidth * 0.45;
      const height = isMobile ? window.innerHeight * 0.45 : window.innerHeight;

      camera.aspect = width / height;
      camera.updateProjectionMatrix();
      renderer.setSize(width, height);

      if (isMobile) {
        camera.position.set(0, 0, 5);
        camera.lookAt(0, 0, 0);
      } else {
        camera.position.set(4, 0, 3);
        camera.lookAt(0, 0, 0);
      }
    };

    updateCamera();
    window.addEventListener('resize', updateCamera);

    // Create 3 cubes
    const cubes = [];
    const colors = [0x00eeff, 0xff00cc, 0x00ff99];
    const positions = [
      new THREE.Vector3(-1.8, -1, 0),
      new THREE.Vector3(0, 0, 0),
      new THREE.Vector3(1.8, 1, 0)
    ];

    positions.forEach((pos, i) => {
      const geo = new THREE.BoxGeometry(0.9, 0.9, 0.9);
      const mat = new THREE.MeshStandardMaterial({
        color: colors[i],
        roughness: 0.1,
        metalness: 0.9,
        emissive: colors[i],
        emissiveIntensity: 0.15
      });
      const cube = new THREE.Mesh(geo, mat);
      cube.position.copy(pos);
      scene.add(cube);
      cubes.push(cube);
    });

    // Lights
    const ambient = new THREE.AmbientLight(0xffffff, 0.4);
    scene.add(ambient);
    const dirLight = new THREE.DirectionalLight(0xffffff, 1);
    dirLight.position.set(5, 5, 5);
    scene.add(dirLight);

    // GSAP Scroll Morph
    gsap.registerPlugin(ScrollTrigger);

    // Cube 1: Rotate
    gsap.to(cubes[0].rotation, {
      y: Math.PI * 2,
      x: Math.PI,
      scrollTrigger: { trigger: "body", start: "top top", end: "+=300%", scrub: true }
    });

    // Cube 2: Scale
    gsap.to(cubes[1].scale, {
      x: 1.8, y: 1.8, z: 1.8,
      scrollTrigger: { trigger: "body", start: "top top", end: "+=250%", scrub: true }
    });

    // Cube 3: Move
    gsap.to(cubes[2].position, {
      x: 3, y: 2,
      scrollTrigger: { trigger: "body", start: "top top", end: "+=350%", scrub: true }
    });

    // Auto-spin base
    const animate = () => {
      requestAnimationFrame(animate);
      cubes.forEach(cube => {
        cube.rotation.x += 0.003;
        cube.rotation.y += 0.003;
      });
      renderer.render(scene, camera);
    };
    animate();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>3D Scroll Portfolio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/three@0.160.1/build/three.min.js"></script>
  <script src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow-x: hidden;
      background: #000;
      color: white;
      font-family: 'Inter', sans-serif;
    }
    #canvas-container {
      position: absolute;
      top: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 2rem;
      box-sizing: border-box;
    }
    .text-content {
      flex: 1;
      max-width: 600px;
      z-index: 10;
    }
    .text-content h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    @media (min-width: 1024px) {
      .text-content h1 { font-size: 3.5rem; }
      .hero {
        padding-left: 5%;
        padding-right: 40%; /* Leave space for 3D on right */
      }
    }
    @media (max-width: 1023px) {
      .hero {
        flex-direction: column;
        justify-content: flex-start;
        text-align: center;
        padding-top: 4rem;
      }
      .text-content {
        margin-bottom: 2rem;
        max-width: 100%;
      }
      #canvas-container {
        height: 50vh;
        position: relative;
        margin-top: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="hero">
    <div class="text-content">
      <h1>
        Hi, I'm <span class="text-cyan-400">Alex</span>  
        <br />3D Web Developer
      </h1>
      <p class="text-gray-300 mb-6 max-w-lg">
        I build immersive experiences that blend AI, real-time data, and interactive 3D.
        Scroll to see the cubes react!
      </p>
      <button class="px-6 py-3 bg-cyan-500 text-black font-bold rounded-full hover:bg-cyan-400 transition">
        View Projects
      </button>
    </div>
  </div>

  <!-- Extra sections to enable scroll -->
  <section class="py-20 px-6 text-center">
    <h2 class="text-3xl font-bold mb-6">My Work</h2>
    <p class="text-gray-400 max-w-2xl mx-auto">
      From real-time transit optimization in Jabodetabek to AI-powered dashboards â€” I turn complex problems into elegant interfaces.
    </p>
  </section>

  <section class="py-20 px-6 text-center">
    <h2 class="text-3xl font-bold mb-6">Let's Connect</h2>
    <p class="text-gray-400 max-w-2xl mx-auto mb-8">
      Open to collaborations on urban mobility, AI, or immersive web apps.
    </p>
    <a href="mailto:you@example.com" class="inline-block px-6 py-3 bg-cyan-500 text-black font-bold rounded-full">
      Get in Touch
    </a>
  </section>

  <div id="canvas-container"></div>

  <script>
    // Initialize Three.js
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);
    scene.fog = new THREE.Fog(0x000000, 8, 15);

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    document.getElementById('canvas-container').appendChild(renderer.domElement);

    // Adjust camera for desktop vs mobile
    const isMobile = window.innerWidth < 1024;
    if (isMobile) {
      camera.position.set(0, 0, 6);
    } else {
      camera.position.set(8, 0, 6); // Right-side view
      camera.lookAt(0, 0, 0);
    }

    // Create multiple cubes
    const cubes = [];
    const colors = [0x00eeff, 0xff00cc, 0x00ff99, 0xffaa00];
    const positions = isMobile 
      ? [[0, -2, 0], [0, 0, 0], [0, 2, 0]]
      : [[-2, -1, 0], [0, 0, 0], [2, 1, 0]];

    positions.forEach((pos, i) => {
      const geo = new THREE.BoxGeometry(1.2, 1.2, 1.2);
      const mat = new THREE.MeshStandardMaterial({
        color: colors[i % colors.length],
        roughness: 0.1,
        metalness: 0.8,
        emissive: colors[i % colors.length],
        emissiveIntensity: 0.1
      });
      const cube = new THREE.Mesh(geo, mat);
      cube.position.set(...pos);
      scene.add(cube);
      cubes.push({ mesh: cube, basePos: new THREE.Vector3(...pos) });
    });

    // Lights
    const ambient = new THREE.AmbientLight(0xffffff, 0.3);
    scene.add(ambient);
    const dirLight = new THREE.DirectionalLight(0xffffff, 1);
    dirLight.position.set(5, 5, 5);
    scene.add(dirLight);

    // Handle resize
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      
      // Re-adjust layout
      const newIsMobile = window.innerWidth < 1024;
      if (newIsMobile) {
        camera.position.set(0, 0, 6);
        camera.lookAt(0, 0, 0);
        // Update cube positions for mobile
        cubes[0].mesh.position.set(0, -2, 0);
        cubes[1].mesh.position.set(0, 0, 0);
        cubes[2].mesh.position.set(0, 2, 0);
      } else {
        camera.position.set(8, 0, 6);
        camera.lookAt(0, 0, 0);
        cubes[0].mesh.position.set(-2, -1, 0);
        cubes[1].mesh.position.set(0, 0, 0);
        cubes[2].mesh.position.set(2, 1, 0);
      }
    });

    // GSAP Scroll-Driven Morph Effect
    gsap.registerPlugin(ScrollTrigger);

    // Animate cubes on scroll
    gsap.to(cubes[0].mesh.rotation, {
      y: Math.PI * 2,
      x: Math.PI,
      duration: 4,
      scrollTrigger: {
        trigger: "body",
        start: "top top",
        end: "+=200%",
        scrub: true
      }
    });

    gsap.to(cubes[1].mesh.scale, {
      x: 1.8,
      y: 1.8,
      z: 1.8,
      duration: 3,
      scrollTrigger: {
        trigger: "body",
        start: "top top",
        end: "+=150%",
        scrub: true
      }
    });

    gsap.to(cubes[2].mesh.position, {
      x: isMobile ? 0 : 3,
      y: isMobile ? 3 : 2,
      z: 0,
      duration: 5,
      scrollTrigger: {
        trigger: "body",
        start: "top top",
        end: "+=250%",
        scrub: true
      }
    });

    // Auto-spin base animation
    const animate = () => {
      requestAnimationFrame(animate);
      
      cubes.forEach(c => {
        c.mesh.rotation.x += 0.005;
        c.mesh.rotation.y += 0.005;
      });

      renderer.render(scene, camera);
    };
    animate();
  </script>
</body>
</html>

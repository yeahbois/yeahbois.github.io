<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>3D Morph Portfolio</title>
  <!-- Fixed CDN URLs (removed trailing spaces) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/three@0.160.1/build/three.min.js"></script>
  <script src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow-x: hidden;
      background: #000;
      color: white;
      font-family: 'Inter', sans-serif;
    }
    #canvas-container {
      position: fixed;
      top: 0;
      right: 0;
      width: 45vw;
      height: 100vh;
      z-index: -1;
      pointer-events: none;
    }
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 2rem 2rem 2rem 5%;
      box-sizing: border-box;
      position: relative;
      z-index: 10;
    }
    .text-content {
      flex: 1;
      max-width: 600px;
    }
    .text-content h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    @media (min-width: 1024px) {
      .text-content h1 { font-size: 3.5rem; }
    }
    @media (max-width: 1023px) {
      #canvas-container {
        width: 100vw;
        height: 40vh;
        top: auto;
        bottom: 0;
        right: 0;
      }
      .hero {
        padding: 4rem 2rem 2rem;
        text-align: center;
        flex-direction: column;
      }
      .text-content {
        margin-bottom: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="hero">
    <div class="text-content">
      <h1>
        Hi, I'm <span class="text-cyan-400">Alex</span>  
        <br />3D Web Developer
      </h1>
      <p class="text-gray-300 mb-6 max-w-lg">
        I build immersive experiences that blend AI, real-time data, and interactive 3D.
        Scroll to see the morph effect!
      </p>
      <button class="px-6 py-3 bg-cyan-500 text-black font-bold rounded-full hover:bg-cyan-400 transition">
        View Projects
      </button>
    </div>
  </div>

  <!-- Content to enable scroll -->
  <section class="py-20 px-6 max-w-3xl mx-auto">
    <h2 class="text-3xl font-bold mb-6">My Work</h2>
    <p class="text-gray-400">
      From real-time transit optimization in Jabodetabek to AI-powered dashboards â€” I turn complex urban challenges into elegant, interactive interfaces.
    </p>
  </section>

  <section class="py-20 px-6 max-w-3xl mx-auto">
    <h2 class="text-3xl font-bold mb-6">Let's Connect</h2>
    <p class="text-gray-400 mb-8">
      Open to collaborations on sustainable AI, urban mobility, or immersive web apps.
    </p>
    <a href="mailto:you@example.com" class="inline-block px-6 py-3 bg-cyan-500 text-black font-bold rounded-full">
      Get in Touch
    </a>
  </section>

  <!-- 3D Canvas -->
  <div id="canvas-container"></div>

  <script>
    // Initialize Three.js
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);
    scene.fog = new THREE.Fog(0x000000, 8, 15);

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, preserveDrawingBuffer: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    document.getElementById('canvas-container').appendChild(renderer.domElement);

    // Position camera for right-side view
    const isMobile = window.innerWidth < 1024;
    if (isMobile) {
      camera.position.set(0, 0, 6);
    } else {
      camera.position.set(5, 0, 4); // Closer, angled for right panel
      camera.lookAt(0, 0, 0);
    }

    // Create 3 cubes
    const cubes = [];
    const colors = [0x00eeff, 0xff00cc, 0x00ff99];
    const positions = isMobile 
      ? [[0, -1.5, 0], [0, 0, 0], [0, 1.5, 0]]
      : [[-1.5, -1, 0], [0, 0, 0], [1.5, 1, 0]];

    positions.forEach((pos, i) => {
      const geo = new THREE.BoxGeometry(1, 1, 1);
      const mat = new THREE.MeshStandardMaterial({
        color: colors[i],
        roughness: 0.1,
        metalness: 0.85,
        emissive: colors[i],
        emissiveIntensity: 0.15
      });
      const cube = new THREE.Mesh(geo, mat);
      cube.position.set(...pos);
      scene.add(cube);
      cubes.push(cube);
    });

    // Lights
    const ambient = new THREE.AmbientLight(0xffffff, 0.4);
    scene.add(ambient);
    const dirLight = new THREE.DirectionalLight(0xffffff, 1);
    dirLight.position.set(5, 5, 5);
    scene.add(dirLight);

    // Resize handler
    window.addEventListener('resize', () => {
      const width = isMobile ? window.innerWidth : window.innerWidth * 0.45;
      const height = isMobile ? window.innerHeight * 0.4 : window.innerHeight;
      camera.aspect = width / height;
      camera.updateProjectionMatrix();
      renderer.setSize(width, height);
    });

    // GSAP Scroll-Driven Morph (PowerPoint-style)
    gsap.registerPlugin(ScrollTrigger);

    // Cube 1: Rotate dramatically
    gsap.to(cubes[0].rotation, {
      y: Math.PI * 2,
      x: Math.PI,
      duration: 1,
      scrollTrigger: {
        trigger: "body",
        start: "top top",
        end: "+=300%",
        scrub: true
      }
    });

    // Cube 2: Scale up and pulse
    gsap.to(cubes[1].scale, {
      x: 1.7,
      y: 1.7,
      z: 1.7,
      duration: 1,
      scrollTrigger: {
        trigger: "body",
        start: "top top",
        end: "+=250%",
        scrub: true
      }
    });

    // Cube 3: Float upward/right
    gsap.to(cubes[2].position, {
      y: isMobile ? 2.5 : 2,
      x: isMobile ? 0 : 2.5,
      duration: 1,
      scrollTrigger: {
        trigger: "body",
        start: "top top",
        end: "+=350%",
        scrub: true
      }
    });

    // Base auto-spin (subtle)
    const animate = () => {
      requestAnimationFrame(animate);
      cubes.forEach(cube => {
        cube.rotation.x += 0.002;
        cube.rotation.y += 0.002;
      });
      renderer.render(scene, camera);
    };
    animate();
  </script>
</body>
</html>
